<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/loader.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./css/aos.min.css" rel="stylesheet" />
    <script src="./js/aos.js"></script>
    <script src="node_modules\web3\dist\web3.min.js"></script>
    <script src="js/App.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="icon" href="./assets/images/icon.png" />
    <title>Certificate Template</title>
    <style>
        .certificate-template {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 20px;
        }
      
        .certificate-template img {
          max-width: 700px;
          cursor: pointer;
        }
      
        .certificate-template button {
          display: block;
          margin-top: 10px;
          padding: 10px 20px;
          background-color: #007bff;
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
        }
      
        .center-heading {
          text-align: center;
          font-size: 60px;
          font-weight: bold;
        }
      </style>
      </head>
      <body>
      <div class="loader-wraper">
        <div class="lds-roller">
          <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
        </div>
      </div>
      <!-- Navigation Bar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light py-3 navbar-dark">
        <div class="container">
          <a class="navbar-brand" href="index.html">
            <i class="fas fa-dragon home_text"></i>
            <span class="home_text">ChainProof</span>
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="certificate.html">Certificate Template</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="upload.html">Upload</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="verify.html">Verify</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="delete.html">Delete</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="admin.html">Admin</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="about.html">Duo Dynamics</a>
              </li>
            </ul>
            <div class="d-flex">
              <button id="loginButton" onclick="connect()" class="btn main-button">Login</button>
              <button id="logoutButton" onclick="disconnect()" class="btn main-button">Logout</button>
            </div>
          </div>
        </div>
      </nav>
      <!-- Body Content -->
      
      <main>
        <section>
            <style>
                .center-heading {
                    text-align: center;
                    font-size: 60px; /* Adjust the font size as needed */
                    font-weight: bold;
                }
            </style>
            
            <h2 class="center-heading">Choose Certificate Template</h2>
            
            <div class="certificate-templates" id="certificate-templates">
                <!-- Certificate templates will be added dynamically here -->
            </div>
        </section>
        <section>
            <h2>Fill Details</h2>
            <form id="certificate-form" onsubmit="return submitForm()">
                <input type="text" name="recipientName" placeholder="Recipient's Name">
                <input type="text" name="sign" placeholder="Sign">
                <input type="text" name="dateIssued" placeholder="Date Issued">
                <button type="submit">Submit</button>
            </form>
        </section>
    </main>
      </main>
      <!-- Footer -->
      <div class="footer-dark">
        <footer>
          <div class="container">
            <div class="row">
              <div class="col-sm-6 col-md-3 item">
                <h3 data-aos="fade-right">Services</h3>
                <ul data-aos="zoom-in">
                  <li><a href="#">Ethereum</a></li>
                  <li><a href="#">Blockchain Tech.</a></li>
                  <li><a href="#">Smart Contracts </a></li>
                </ul>
              </div>
              <div class="col-sm-6 col-md-3 item">
                <h3 data-aos="fade-right">About us</h3>
                <ul data-aos="zoom-in">
                  <li><a href="#">Duo Dynamics</a></li>
                </ul>
              </div>
              <div class="col-md-6 item text">
                <h3 data-aos="fade-right">
                  <i class="fas fa-dragon"></i>
                  ChainProof</h3>
                <p data-aos="zoom-in">
                  The ChainProof platform stands as an industry-leading Document Verification solution engineered to enhance efficiency and bolster security across your operations.
                </p>
              </div>
              <div class="col-md text-center text-md-start">
                <h3 data-aos="fade-right">Credits</h3>
                <ul data-aos="zoom-in">
                  <li><a href="https://undraw.co/illustrations" title="Indraw illustrations">Undraw's illustrations depict blockchain technology</a></li>
                  <li><a href='https://www.freepik.com/vectors/futuristic-background'>Futuristic background vector created by freepik - www.freepik.com</a></li>
                  <li><a href='https://www.freepik.com/vectors/tech-world'>Tech world - www.freepik.com</a></li>
                  <li><a href="https://unsplash.com/@theshubhamdhage?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Photo</a> on <a href="https://unsplash.com/s/photos/blockchain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></li>
                  <li><a href="https://www.flaticon.com/free-icons/wings" title="wings icons">Wings icons created by Freepik - Flaticon</a></li>
                  <li><a href="https://loading.io/icon/">Icon Loading  loading.io</a></li>
                </ul>
              </div>
              <div data-aos="zoom-in" class="col item social">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
              </div>
            </div>
            <p class="copyright">ChainProof Â© 2024</p>
          </div>
        </footer>
      </div>
      <div>
        <i onclick="topFunction()" id="scroll-btn" class="fas fa-angle-up"></i>
      </div>
      <div>
        <a href="#"> 
          <i class="fas fa-headset"></i>
        </a>
      </div>
      <script src="./js/aos.js"></script>
      <script src="./js/script.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
      <script>
      // Sample certificate data (you can replace this with your actual data)
      const certificateData = [
        { id: '1', src: 'Certificate/1.png', alt: 'Certificate Template 1' },
        { id: '2', src: 'Certificate/2.png', alt: 'Certificate Template 2' },
        { id: '3', src: 'Certificate/3.png', alt: 'Certificate Template 3' },
        { id: '4', src: 'Certificate/4.png', alt: 'Certificate Template 4' },
        { id: '5', src: 'Certificate/5.png', alt: 'Certificate Template 5' },
        { id: '6', src: 'Certificate/6.png', alt: 'Certificate Template 6' },
        { id: '7', src: 'Certificate/7.png', alt: 'Certificate Template 7' },
        // Add more certificate data as needed
      ];
      // Function to create certificate template elements
      function createCertificateTemplate(certificate) {
        const templateDiv = document.createElement('div');
        templateDiv.classList.add('certificate-template');
      
        const img = document.createElement('img');
        img.src = certificate.src;
        img.alt = certificate.alt;
        img.id = certificate.id;
        img.style.maxWidth = "700px"; // Set max width to 700px
      
        const button = document.createElement('button');
        button.textContent = 'Choose ' + certificate.id;
      
        // Adjusted button style
        button.style.display = "block";
        button.style.marginTop = "10px";
        button.style.padding = "10px 20px";
        button.style.backgroundColor = "#007bff";
        button.style.color = "white";
        button.style.border = "none";
        button.style.borderRadius = "5px";
        button.style.cursor = "pointer";
      
        button.onclick = function() { chooseTemplate(certificate.id); };
      
        templateDiv.appendChild(img);
        templateDiv.appendChild(button);
      
        return templateDiv;
      }
      
      // Function to add certificate templates to the DOM
      function addCertificateTemplates() {
        const certificateContainer = document.getElementById('certificate-templates');
      
        certificateData.forEach(certificate => {
          const template = createCertificateTemplate(certificate);
          certificateContainer.appendChild(template);
        });
      }
      
      // Call the function to add certificate templates
      addCertificateTemplates();
      
      // Function to highlight the selected template
      function chooseTemplate(templateId) {
        const templates = document.querySelectorAll('.certificate-template img');
        templates.forEach(template => template.classList.remove('selected'));
        document.getElementById(templateId).classList.add('selected');
      }
      
        // Function to submit the form and generate certificate
        function submitForm() {
            const formData = new FormData(document.getElementById('certificate-form'));
            const recipientName = formData.get('recipientName');
            const sign = formData.get('sign');
            const dateIssued = formData.get('dateIssued');

            const selectedTemplate = document.querySelector('.certificate-template img.selected');
            if (!selectedTemplate) {
                alert('Please choose a certificate template.');
                return false;
            }

            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            const templateWidth = selectedTemplate.width;
            const templateHeight = selectedTemplate.height;

            canvas.width = templateWidth;
            canvas.height = templateHeight;

            ctx.drawImage(selectedTemplate, 0, 0, templateWidth, templateHeight);
            ctx.fillStyle = '#000';
            ctx.font = 'bold 20px Arial';

            // Position recipient name in the center middle
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(recipientName, templateWidth / 2, templateHeight / 2);

            // Position signature
            ctx.textAlign = 'left';
            ctx.fillText( sign, templateWidth * 0.25, templateHeight * 0.73);

            // Position date to right down
            ctx.textAlign = 'right';
            ctx.fillText(dateIssued, templateWidth * 0.83, templateHeight * 0.73);

            const imageUrl = canvas.toDataURL();

            const link = document.createElement('a');
            link.href = imageUrl;
            link.download = 'certificate.png';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            return false;
        }
      
      
      // Function to scroll to top
      function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
      }
      
      // Using MutationObserver to detect changes in the certificate templates
      const observer = new MutationObserver(mutations => {
        mutations.forEach(mutation => {
          if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
            // New certificate template added, update event listeners if necessary
            const addedTemplate = mutation.addedNodes[0];
            const img = addedTemplate.querySelector('img');
            const button = addedTemplate.querySelector('button');
            img.onclick = function() { chooseTemplate(img.id); };
            button.onclick = function() { chooseTemplate(img.id); };
          }
        });
      });
      
      observer.observe(document.getElementById('certificate-templates'), {
        childList: true,
      });
      
      </script>
      </body>
      </html>